<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>uPhone - AIËôöÊãüÊâãÊú∫</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- iPhone Â§ñÊ°Ü -->
    <div class="iphone-frame">
        <!-- Áä∂ÊÄÅÊ†è -->
        <div class="status-bar">
            <div class="status-left">
                <span id="carrier">uPhone</span>
                <span class="signal-bars">
                    <i></i><i></i><i></i><i></i>
                </span>
            </div>
            <div class="status-center">
                <span id="statusTime">12:00</span>
            </div>
            <div class="status-right">
                <span class="battery-icon">
                    <span class="battery-level"></span>
                </span>
                <span>100%</span>
            </div>
        </div>

        <!-- ‰∏ªÂ±èÂπï -->
        <div class="screen" id="homeScreen">
            <!-- Êó∂Èó¥Âç°Áâá -->
            <div class="time-card">
                <div class="time" id="mainTime">12:00</div>
                <div class="date" id="mainDate">1Êúà1Êó• ÊòüÊúü‰∏Ä</div>
            </div>

            <!-- Â∫îÁî®ÂõæÊ†áÂå∫Âüü -->
            <div class="app-grid">
                <div class="app-icon" data-app="wechat">
                    <svg viewBox="0 0 100 100" class="icon-wechat">
                        <circle cx="35" cy="35" r="8" fill="none" stroke="currentColor" stroke-width="2"/>
                        <circle cx="65" cy="35" r="8" fill="none" stroke="currentColor" stroke-width="2"/>
                        <path d="M20 50 Q50 70 80 50" fill="none" stroke="currentColor" stroke-width="2"/>
                        <rect x="15" y="15" width="70" height="60" rx="15" fill="none" stroke="currentColor" stroke-width="2"/>
                    </svg>
                    <span>ÂæÆ‰ø°</span>
                </div>
                <div class="app-icon placeholder">
                    <div class="app-icon-placeholder"></div>
                    <span>ÂæÖÂºÄÂèë</span>
                </div>
                <div class="app-icon placeholder">
                    <div class="app-icon-placeholder"></div>
                    <span>ÂæÖÂºÄÂèë</span>
                </div>
                <div class="app-icon placeholder">
                    <div class="app-icon-placeholder"></div>
                    <span>ÂæÖÂºÄÂèë</span>
                </div>
            </div>
        </div>

        <!-- ÂæÆ‰ø°Â∫îÁî® -->
        <div class="app-screen hidden" id="wechatApp">
            <!-- ÂæÆ‰ø°È°∂ÈÉ®Ê†è -->
            <div class="wechat-header">
                <button class="back-btn" onclick="backToHome()">
                    <svg width="20" height="20" viewBox="0 0 20 20">
                        <path d="M12 4 L6 10 L12 16" stroke="currentColor" stroke-width="2" fill="none"/>
                    </svg>
                </button>
                <h3>ÂæÆ‰ø°</h3>
                <button class="add-chat-btn" onclick="showAddChat()">
                    <svg width="20" height="20" viewBox="0 0 20 20">
                        <line x1="10" y1="5" x2="10" y2="15" stroke="currentColor" stroke-width="2"/>
                        <line x1="5" y1="10" x2="15" y2="10" stroke="currentColor" stroke-width="2"/>
                    </svg>
                </button>
            </div>

            <!-- ËÅäÂ§©ÂàóË°® -->
            <div class="chat-list" id="chatList">
                <!-- ËÅäÂ§©È°πÂ∞ÜÈÄöËøáJSÂä®ÊÄÅÊ∑ªÂä† -->
            </div>

            <!-- ËÅäÂ§©ÁïåÈù¢ -->
            <div class="chat-screen hidden" id="chatScreen">
                <div class="chat-header">
                    <button class="back-btn" onclick="backToChatList()">
                        <svg width="20" height="20" viewBox="0 0 20 20">
                            <path d="M12 4 L6 10 L12 16" stroke="currentColor" stroke-width="2" fill="none"/>
                        </svg>
                    </button>
                    <div class="chat-info">
                        <span class="chat-name" id="chatName">ËÅäÂ§©</span>
                    </div>
                    <button class="chat-settings-btn" onclick="showChatSettings()">
                        <svg width="20" height="20" viewBox="0 0 20 20">
                            <circle cx="10" cy="5" r="2" fill="currentColor"/>
                            <circle cx="10" cy="10" r="2" fill="currentColor"/>
                            <circle cx="10" cy="15" r="2" fill="currentColor"/>
                        </svg>
                    </button>
                </div>

                <div class="messages-container" id="messagesContainer">
                    <!-- Ê∂àÊÅØÂ∞ÜÈÄöËøáJSÂä®ÊÄÅÊ∑ªÂä† -->
                </div>

                <div class="input-area">
                    <div class="input-toolbar">
                        <button onclick="showSpecialInput('voice')" title="ËØ≠Èü≥">üé§</button>
                        <button onclick="showSpecialInput('image')" title="ÂõæÁâá">üñºÔ∏è</button>
                        <button onclick="showSpecialInput('redpacket')" title="Á∫¢ÂåÖ">üßß</button>
                        <button onclick="showSpecialInput('location')" title="‰ΩçÁΩÆ">üìç</button>
                        <button onclick="startNewTopic()" title="Êñ∞ËØùÈ¢ò">‚ù§Ô∏è</button>
                        <button onclick="sendWithAI()" title="AIÂõûÂ§ç">‚úâÔ∏è</button>
                    </div>
                    <div class="input-wrapper">
                        <textarea id="messageInput" placeholder="ËæìÂÖ•Ê∂àÊÅØ..." rows="1"></textarea>
                        <button class="send-btn" onclick="sendMessage()">ÂèëÈÄÅ</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- ËÆæÁΩÆÈ°µÈù¢ -->
        <div class="settings-screen hidden" id="settingsScreen">
            <div class="settings-header">
                <button class="back-btn" onclick="closeSettings()">
                    <svg width="20" height="20" viewBox="0 0 20 20">
                        <path d="M12 4 L6 10 L12 16" stroke="currentColor" stroke-width="2" fill="none"/>
                    </svg>
                </button>
                <h3>ËÆæÁΩÆ</h3>
            </div>
            
            <div class="settings-content">
                <div class="settings-section">
                    <h4>ËÅäÂ§©APIËÆæÁΩÆ</h4>
                    <div class="setting-item">
                        <label>API URL:</label>
                        <input type="text" id="chatApiUrl" placeholder="https://api.openai.com/v1/chat/completions">
                    </div>
                    <div class="setting-item">
                        <label>API Key:</label>
                        <input type="password" id="chatApiKey" placeholder="sk-...">
                    </div>
                    <div class="setting-item">
                        <label>Ê®°Âûã:</label>
                        <select id="chatModel">
                            <option value="gpt-3.5-turbo">GPT-3.5 Turbo</option>
                            <option value="gpt-4">GPT-4</option>
                            <option value="claude-3-opus">Claude 3 Opus</option>
                            <option value="claude-3-sonnet">Claude 3 Sonnet</option>
                        </select>
                    </div>
                    <div class="setting-item">
                        <label>Ê∏©Â∫¶ (0-2):</label>
                        <input type="range" id="temperature" min="0" max="2" step="0.1" value="0.7">
                        <span id="tempValue">0.7</span>
                    </div>
                </div>

                <div class="settings-section">
                    <h4>ÊÄªÁªìAPIËÆæÁΩÆ</h4>
                    <div class="setting-item">
                        <label>API URL:</label>
                        <input type="text" id="summaryApiUrl" placeholder="https://api.openai.com/v1/chat/completions">
                    </div>
                    <div class="setting-item">
                        <label>API Key:</label>
                        <input type="password" id="summaryApiKey" placeholder="sk-...">
                    </div>
                </div>

                <div class="settings-section">
                    <h4>Êï∞ÊçÆÁÆ°ÁêÜ</h4>
                    <button class="settings-btn" onclick="exportSettings()">ÂØºÂá∫ËÆæÁΩÆ</button>
                    <button class="settings-btn" onclick="document.getElementById('importFile').click()">ÂØºÂÖ•ËÆæÁΩÆ</button>
                    <input type="file" id="importFile" style="display: none;" accept=".json" onchange="importSettings(this)">
                    <button class="settings-btn danger" onclick="clearAllData()">Ê∏ÖÈô§ÊâÄÊúâÊï∞ÊçÆ</button>
                </div>
            </div>
        </div>

        <!-- ‰∏ªÈ¢òËÆæÁΩÆÈ°µÈù¢ -->
        <div class="theme-screen hidden" id="themeScreen">
            <div class="theme-header">
                <button class="back-btn" onclick="closeTheme()">
                    <svg width="20" height="20" viewBox="0 0 20 20">
                        <path d="M12 4 L6 10 L12 16" stroke="currentColor" stroke-width="2" fill="none"/>
                    </svg>
                </button>
                <h3>‰∏ªÈ¢ò</h3>
            </div>
            
            <div class="theme-content">
                <div class="theme-section">
                    <h4>ÈÖçËâ≤ÊñπÊ°à</h4>
                    <div class="color-schemes">
                        <div class="color-scheme" data-theme="default" onclick="applyTheme('default')">
                            <div class="color-preview" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%)"></div>
                            <span>ÈªòËÆ§</span>
                        </div>
                        <div class="color-scheme" data-theme="dark" onclick="applyTheme('dark')">
                            <div class="color-preview" style="background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%)"></div>
                            <span>ÊöóÈªë</span>
                        </div>
                        <div class="color-scheme" data-theme="ocean" onclick="applyTheme('ocean')">
                            <div class="color-preview" style="background: linear-gradient(135deg, #2193b0 0%, #6dd5ed 100%)"></div>
                            <span>Êµ∑Ê¥ã</span>
                        </div>
                        <div class="color-scheme" data-theme="forest" onclick="applyTheme('forest')">
                            <div class="color-preview" style="background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%)"></div>
                            <span>Ê£ÆÊûó</span>
                        </div>
                    </div>
                </div>

                <div class="theme-section">
                    <h4>Â£ÅÁ∫∏ËÆæÁΩÆ</h4>
                    <button class="theme-btn" onclick="document.getElementById('wallpaperFile').click()">ÈÄâÊã©Â£ÅÁ∫∏</button>
                    <input type="file" id="wallpaperFile" style="display: none;" accept="image/*" onchange="setWallpaper(this)">
                    <button class="theme-btn" onclick="resetWallpaper()">ÊÅ¢Â§çÈªòËÆ§</button>
                </div>

                <div class="theme-section">
                    <h4>Â≠ó‰ΩìËÆæÁΩÆ</h4>
                    <div class="setting-item">
                        <label>ÂÖ®Â±ÄÂ≠ó‰Ωì:</label>
                        <select id="globalFont" onchange="setGlobalFont(this.value)">
                            <option value="system">Á≥ªÁªüÈªòËÆ§</option>
                            <option value="serif">Ë°¨Á∫ø‰Ωì</option>
                            <option value="sans-serif">Êó†Ë°¨Á∫ø‰Ωì</option>
                            <option value="monospace">Á≠âÂÆΩÂ≠ó‰Ωì</option>
                        </select>
                    </div>
                    <div class="setting-item">
                        <label>ËÅäÂ§©Â≠ó‰ΩìÂ§ßÂ∞è:</label>
                        <input type="range" id="chatFontSize" min="12" max="20" value="14" onchange="setChatFontSize(this.value)">
                        <span id="fontSizeValue">14px</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- ËßíËâ≤ËÆæÁΩÆÂºπÁ™ó -->
        <div class="modal hidden" id="characterModal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>ËßíËâ≤ËÆæÁΩÆ</h3>
                    <button class="close-btn" onclick="closeCharacterModal()">√ó</button>
                </div>
                <div class="modal-body">
                    <div class="form-section">
                        <h4>ËßíËâ≤‰ø°ÊÅØ</h4>
                        <div class="form-item">
                            <label>ËßíËâ≤ÊòµÁß∞:</label>
                            <input type="text" id="charNickname" placeholder="ÊòæÁ§∫ÁöÑÂêçÁß∞">
                        </div>
                        <div class="form-item">
                            <label>ËßíËâ≤ÁúüÂêç:</label>
                            <input type="text" id="charRealname" placeholder="ËßíËâ≤ÁöÑÁúüÂÆûÂêçÂ≠ó">
                        </div>
                        <div class="form-item">
                            <label>ËßíËâ≤ËÆæÂÆö:</label>
                            <textarea id="charSetting" rows="4" placeholder="ÊèèËø∞ËßíËâ≤ÁöÑÊÄßÊ†º„ÄÅËÉåÊôØ„ÄÅËØ¥ËØùÈ£éÊ†ºÁ≠â"></textarea>
                        </div>
                        <div class="form-item">
                            <label>ËßíËâ≤Â§¥ÂÉè:</label>
                            <button onclick="document.getElementById('charAvatar').click()">ÈÄâÊã©ÂõæÁâá</button>
                            <input type="file" id="charAvatar" style="display: none;" accept="image/*">
                            <div class="avatar-preview" id="charAvatarPreview"></div>
                        </div>
                    </div>

                    <div class="form-section">
                        <h4>Áî®Êà∑‰ø°ÊÅØ</h4>
                        <div class="form-item">
                            <label>Áî®Êà∑ÊòµÁß∞:</label>
                            <input type="text" id="userNickname" placeholder="‰Ω†ÁöÑÊòæÁ§∫ÂêçÁß∞">
                        </div>
                        <div class="form-item">
                            <label>Áî®Êà∑ÁúüÂêç:</label>
                            <input type="text" id="userRealname" placeholder="‰Ω†ÁöÑÁúüÂÆûÂêçÂ≠ó">
                        </div>
                        <div class="form-item">
                            <label>Áî®Êà∑ËÆæÂÆö:</label>
                            <textarea id="userSetting" rows="4" placeholder="ÊèèËø∞Áî®Êà∑ÁöÑËÉåÊôØ„ÄÅÊÄßÊ†ºÁ≠âÔºàÂèØÈÄâÔºâ"></textarea>
                        </div>
                        <div class="form-item">
                            <label>Áî®Êà∑Â§¥ÂÉè:</label>
                            <button onclick="document.getElementById('userAvatar').click()">ÈÄâÊã©ÂõæÁâá</button>
                            <input type="file" id="userAvatar" style="display: none;" accept="image/*">
                            <div class="avatar-preview" id="userAvatarPreview"></div>
                        </div>
                    </div>

                    <div class="form-section">
                        <h4>ÂØºÂÖ•ËßíËâ≤</h4>
                        <button onclick="document.getElementById('importChar').click()">ÂØºÂÖ•JSON/PNG</button>
                        <input type="file" id="importChar" style="display: none;" accept=".json,.png" onchange="importCharacter(this)">
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="btn-cancel" onclick="closeCharacterModal()">ÂèñÊ∂à</button>
                    <button class="btn-primary" onclick="saveCharacter()">‰øùÂ≠ò</button>
                </div>
            </div>
        </div>

        <!-- ËÅäÂ§©ËÆæÁΩÆÂºπÁ™ó -->
        <div class="modal hidden" id="chatSettingsModal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>ËÅäÂ§©ËÆæÁΩÆ</h3>
                    <button class="close-btn" onclick="closeChatSettings()">√ó</button>
                </div>
                <div class="modal-body">
                    <div class="setting-item">
                        <label>Token ‰ΩøÁî®ÈáèÔºà‰º∞ÁÆóÔºâ:</label>
                        <span id="tokenCount">0</span>
                    </div>
                    <div class="setting-item">
                        <label>ËÅäÂ§©ËÉåÊôØ:</label>
                        <button onclick="document.getElementById('chatBg').click()">ÈÄâÊã©ËÉåÊôØ</button>
                        <input type="file" id="chatBg" style="display: none;" accept="image/*" onchange="setChatBackground(this)">
                    </div>
                    <div class="setting-item">
                        <button class="btn-warning" onclick="archiveEvents()">‰∫ã‰ª∂ÂΩíÊ°£</button>
                        <button class="btn-danger" onclick="clearChatHistory()">Ê∏ÖÁ©∫ËÅäÂ§©ËÆ∞ÂΩï</button>
                    </div>
                    <div class="setting-item">
                        <button onclick="exportChat()">ÂØºÂá∫ËÅäÂ§©</button>
                        <button onclick="document.getElementById('importChat').click()">ÂØºÂÖ•ËÅäÂ§©</button>
                        <input type="file" id="importChat" style="display: none;" accept=".json" onchange="importChatData(this)">
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="btn-primary" onclick="closeChatSettings()">Á°ÆÂÆö</button>
                </div>
            </div>
        </div>

        <!-- Â∫ïÈÉ®ÂØºËà™Ê†è -->
        <div class="bottom-nav">
            <button class="nav-item" onclick="showSettings()">
                <svg width="24" height="24" viewBox="0 0 24 24">
                    <path d="M12 15.5A3.5 3.5 0 0 1 8.5 12A3.5 3.5 0 0 1 12 8.5a3.5 3.5 0 0 1 3.5 3.5a3.5 3.5 0 0 1-3.5 3.5m7.43-2.53c.04-.32.07-.64.07-.97c0-.33-.03-.65-.07-.97l2.11-1.63c.19-.15.24-.42.12-.64l-2-3.46c-.12-.22-.39-.3-.61-.22l-2.49 1c-.52-.4-1.08-.73-1.69-.98l-.38-2.65A.488.488 0 0 0 14 2h-4c-.25 0-.46.18-.49.42l-.38 2.65c-.61.25-1.17.59-1.69.98l-2.49-1c-.23-.09-.49 0-.61.22l-2 3.46c-.13.22-.07.49.12.64l2.11 1.63c-.04.32-.07.65-.07.97c0 .33.03.65.07.97l-2.11 1.63c-.19.15-.24.42-.12.64l2 3.46c.12.22.39.3.61.22l2.49-1c.52.4 1.08.73 1.69.98l.38 2.65c.03.24.24.42.49.42h4c.25 0 .46-.18.49-.42l.38-2.65c.61-.25 1.17-.59 1.69-.98l2.49 1c.23.09.49 0 .61-.22l2-3.46c.13-.22.07-.49-.12-.64l-2.11-1.63Z" fill="none" stroke="currentColor" stroke-width="1.5"/>
                </svg>
                <span>ËÆæÁΩÆ</span>
            </button>
            <button class="nav-item" onclick="showTheme()">
                <svg width="24" height="24" viewBox="0 0 24 24">
                    <path d="M12 2v2m0 16v2M4.93 4.93l1.41 1.41m11.32 11.32l1.41 1.41M2 12h2m16 0h2M4.93 19.07l1.41-1.41m11.32-11.32l1.41-1.41" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                    <circle cx="12" cy="12" r="5" fill="none" stroke="currentColor" stroke-width="1.5"/>
                </svg>
                <span>‰∏ªÈ¢ò</span>
            </button>
            <button class="nav-item disabled">
                <svg width="24" height="24" viewBox="0 0 24 24">
                    <rect x="3" y="3" width="18" height="18" rx="2" fill="none" stroke="currentColor" stroke-width="1.5" stroke-dasharray="3 3"/>
                </svg>
                <span>Âç†‰Ωç</span>
            </button>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
